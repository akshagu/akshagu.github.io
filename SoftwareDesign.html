<!DOCTYPE html>
<!--[if IE 7]> <html lang="en" class="ie7"> <![endif]-->
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en"><!-- InstanceBegin template="/Templates/no-sidebars.dwt" codeOutsideHTMLIsLocked="false" -->
<!--<![endif]-->

<head>
<!-- InstanceBeginEditable name="doctitle" -->
<title>Team Vulcan - Team 8 Project Report</title>
<!-- InstanceEndEditable -->

<!-- Meta -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="ME 210 Mechatronics Project Report" />
<meta name="author" content="Team Vulcan" />
<!-- These meta tags are used when someone shares a link to this page on Facebook,
     Twitter or other social media sites. All tags are optional, but including them
     and customizing the content for specific sites can help the visibility of your
     content.
<meta property="og:type" content="website" />
<meta property="og:title" content="Title when shared to social media sites" />
<meta property="og:description" content="Snippet for social media sites." />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@TwitterHandle" />
<meta name="twitter:title" content="Title for Twitter" />
<meta name="twitter:description" content="Snippet when tweet is expanded." />
<meta name="twitter:image" content="http://stanford.edu/about/images/intro_about.jpg" />
<link rel="publisher" href="https://plus.google.com/id# of Google+ entity associated with your department or group" />
-->
<!-- InstanceEndEditable -->

<!-- CSS -->
<link rel="stylesheet" href="assets/lagunita/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" type="text/css" />
<link rel="stylesheet" href="assets/lagunita/css/base.min.css?v=0.1" type="text/css" />
<link rel="stylesheet" href="assets/lagunita/css/custom.css?v=0.1" type="text/css"/>
<!--[if lt IE 9]>
  <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<!--[if IE 8]>
  <link rel="stylesheet" type="text/css" href="//www.stanford.edu/assets/css/ie/ie8.css" />
<![endif]-->
<!--[if IE 7]>
  <link rel="stylesheet" type="text/css" href="//www.stanford.edu/assets/css/ie/ie7.css" />
<![endif]-->
<!-- JS and jQuery -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="assets/lagunita/js/modernizr.custom.17475.js"></script>
<script src="assets/lagunita/js/bootstrap.min.js"></script>

<!--[if lt IE 9]>
	<script src="//www.stanford.edu/assets/js/respond.js"></script>
<![endif]-->

<!-- custom JS -->
<script src="assets/lagunita/js/base.js?v=1.0"></script>
<script src="assets/lagunita/js/custom.js"></script>
<!-- InstanceBeginEditable name="head" -->
<!-- InstanceEndEditable -->
<!-- InstanceParam name="site_name_1" type="text" value="Lagunita Theme" -->
<!-- InstanceParam name="site_slogan" type="text" value="A Dreamweaver-enabled HTML theme for Stanford websites" -->
<!-- InstanceParam name="site_url" type="text" value="/" -->
<!-- InstanceParam name="body_class" type="text" value="nav-4 site-slogan" -->
<!-- InstanceParam name="h1" type="text" value="" -->
<!-- InstanceParam name="logo" type="text" value="" -->
<!-- InstanceParam name="logo_img_src" type="URL" value="assets/lagunita/images/block-s-logo%402x.png" -->
</head>
<!-- Stanford Lagunita Templates Version 1.0 -->
<!-- Template Property Options:                       
     body_class:   "home", "nav-1", "nav-2", etc. - specifies which item in the top nav to underline
                   "site-slogan" - display a site slogan in the header signature
     logo, h1  :   "hide" - hides the logo or H1 element, eg <h1 class="hide">
 -->

<body class="nav-4 site-slogan">
<div id="su-wrap"> <!-- used to force footer to bottom of short pages -->
  <div id="su-content"> <!-- used to force footer to bottom of short pages --> 
    
    <!--=== Top ===-->
    <div id="top">
      <div class="container"> 
        <!--=== Skip links ===-->
        <div id="skip"> <a href="#content" onClick="$('#content').focus()">Skip to content</a> </div>
        <!-- /Skip links --> 
      </div>
    </div>
    <!--/top--> 
    <!-- Brandbar snippet start -->
    <div id="brandbar">
      <div class="container"> <a href="http://www.stanford.edu"> <img src="assets/lagunita/images/brandbar-stanford-logo%402x.png" alt="Stanford University" width="152" height="23"> </a> </div>
      <!-- .container end --> 
    </div>
    <!-- #brandbar end --> 
    <!-- Brandbar snippet end --> 
    
    <!--=== Header ===-->
    <div id="header" class="clearfix" role="banner">
      <div class="container">
        <div class="row">
          <div class="col-md-8">
            <div id="logo" class=" clearfix"><a href="/index.html"><img class="img-responsive" src="assets/lagunita/images/teamlogo.png" alt="Stanford University" /></a></div>
            <div id="signature">
              <div id="site-name"> <a href="/index.html"> <span id="site-name-1">Team Vulcan</span>  </a> </div>
              <div id="site-slogan"><a href="/index.html"><span id="site-name-2">ME 210 Mechatronics - Final Report</span></a></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Menu -->
    <div id="mainmenu" class="clearfix" role="navigation">
      <div class="container">
        <div class="navbar navbar-default"> 
          
          <!-- main navigation -->
          <button type="button" class="navbar-toggle btn-navbar" data-toggle="collapse" data-target=".navbar-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="menu-text">Menu</span></button>
          <!-- /nav-collapse -->
          
          <div class="navbar-collapse collapse"> 
            <!--search box-->
            <div id="nav-search" role="search">
              <form action="http://www.stanford.edu/search" method="get" id="search-form" accept-charset="UTF-8">
                <h2 class="hidden">Search form</h2>
                <label class="hidden" for="search-field">Search term</label>
                <input name="cx" type="hidden" value="003265255082301896483:sq5n7qoyfh8">
                <input name="cof" type="hidden" value="FORID:9">
                <input name="ie" type="hidden" value="UTF-8">
                <!-- replace value in next line with your site URL -->
                <input name="as_sitesearch" type="hidden" value="www.stanford.edu">
                <input title="Search string" class="input-medium" placeholder="Search this site&hellip;" type="text" id="search-field" name="q" value="" size="15" maxlength="128" />
                <button id="search-btn" type="submit" name="submit"  aria-label="Search" formmethod="get"><i class="fa fa-search"></i></button>
              </form>
            </div>
            <div  role="navigation">
              <div id="primary-nav">
                <ul class="nav navbar-nav" aria-label="primary navigation">
                  <li id="nav-home"> <a href="./index.html">Home</a></li>
                  <li id="nav-1"> <a href="MechanicalDesign.html">Mechanical Design</a> </li>
                  <li id="nav-2"> <a href="ElectricalDesign.html">Electrical Design</a> </li>
                  <li id="nav-3"> <a href="SoftwareDesign.html">Software Design</a> </li>
                  <li id="nav-4"> <a href="BOM.html">Bill of Materials</a> </li>
                  <li id="nav-4"> <a href="Conclusions.html">Conclusions</a> </li>
                </ul>
              </div>
            </div>
          </div>
          <!-- /nav-collapse --> 
        </div>
        <!-- /navbar --> 
        
      </div>
      <!-- /container --> 
    </div>
    <!-- /mainmenu --> 
   
    <!-- Content -->
    <div id="content" class="container" role="main" tabindex="0">
      <h1 class=""><!-- InstanceBeginEditable name="Page Title" -->Software Design<!-- InstanceEndEditable --></h1>
      <div class="row"> 
        
        <!--  #main-content (Center) -->
        <div id="main-content" class="col-md-8 col-lg-7" role="main"> <!-- InstanceBeginEditable name="content_main" -->
          <p class="lead">State Machine</p>

          <p>The software dictating the behavior of the robot was split into two levels - a series of functions that each performed a simple action with a main structure controlling the transition between states of the mission.</p>
          <p>Several functions controlled the components to perform specific actions such as driving forward, turning left, or launching projectiles. These functions commanded the motors and servos appropriately, using PWM to modulate the two motors’ speeds and to change the servo’s position. A PD controller was implemented for the driving functions, the feedback was provided by encoders. This controller allowed for variation in the performance of the two motors, causing the robot to travel straight when going forward and backward, and rotate in place when turning.</p>
          <p>The transition between states was controlled by timers or by input from the bump sensor. For example, the robot would call the “travel forward” function during state one and the state would transition to state two when the bump sensor was triggered. During the transition to state two, the initial time was recorded, then the onboard clock was queried so that state two would end after a prescribed time. As the “travel backward” function was called during state two, the result of these two states occurring was travelling forward until hitting the wall, then moving a set distance back from the wall. This type of procedure was then continued for each step of the mission, such as setting timers to turn right 90° or turning the motors off for a prescribed time to allow for loading the robot. This methodology required tedious testing to determine the correct lengths of time required for each step, for example 650 milliseconds for a 90° turn. This tedium was required however, as the encoders did not have sufficient resolution to allow for direct control. The encoders registered 12 counts per revolution, which resulted in about 10° deviation in the orientation of the robot, deviation too great for mission success.</p>
          <p>The state transitions are outlined in the Figure below. An important note is that turning toward and away from the target is dependent on which target is selected, which is a variable that cycles through from one to four. The times associated with each transition are repeated when possible, such as consistent times to turn 90° to the right or to move a set distance back from the wall. The robot starts in the “forward” state at the top of the diagram.</p>
          <img class="img-responsive" alt="" src="assets/lagunita//images/statemachine.png"> <p></p>
          <p>The main challenge with the method of dead reckoning is accumulation of error and the system not behaving consistently. In our case, wall riding allowed for variations to be eased out of the system. Suppose there was a 3° error when rotating to face the loading zone, so the robot was not aligned perfectly with the playing field. When driving forward and hitting the wall, the force of impact would cause the robot to twist in place such that the body is now orthogonal to the playing field. This is also why using a bump sensor was so important - it allowed for translational error to be reduced, as traveling until hitting the wall is a consistent milestone. </p>
          <!-- InstanceEndEditable --> </div>
        <!--  End #main-content (Center) -->

      </div>
    </div>
    <!-- #content--> 
    
  </div>
  <!-- #su-content --> 
</div>
<!-- #su-wrap --> 

<!-- BEGIN footer -->
<div id="footer" class="clearfix footer" role="contentinfo"> 

  <!-- Global footer snippet start -->
  <div id="global-footer">
    <div class="container">
      <div class="row">
        <div id="bottom-logo" class="col-sm-12 col-md-2">
          <a href="https://www.stanford.edu">
            <img src="https://www-media.stanford.edu/su-identity/images/footer-stanford-logo@2x.png" alt="Stanford University" width="105" height="49"/>
          </a>
        </div>
        <!-- #bottom-logo end -->
        <div id="bottom-text">
          <div class="col-xs-5 col-xs-offset-1 col-sm-12 col-sm-offset-0 col-md-10">
            <ul id="primary-links">
              <li class="home"><a href="https://www.stanford.edu">Stanford Home</a></li>
              <li class="maps alt"><a href="https://visit.stanford.edu/plan/">Maps & Directions</a></li>
              <li class="search-stanford"><a href="https://www.stanford.edu/search/">Search Stanford</a></li>
              <li class="emergency alt"><a href="https://emergency.stanford.edu">Emergency Info</a></li>
            </ul>
          </div>
          <div class="col-xs-6 col-sm-12 col-md-10">
            <ul id="policy-links">
              <li><a href="https://www.stanford.edu/site/terms/" title="Terms of use for sites">Terms of Use</a></li>
              <li><a href="https://www.stanford.edu/site/privacy/" title="Privacy and cookie policy">Privacy</a></li>
              <li><a href="https://uit.stanford.edu/security/copyright-infringement" title="Report alleged copyright infringement">Copyright</a></li>
              <li><a href="https://adminguide.stanford.edu/chapter-1/subchapter-5/policy-1-5-4" title="Ownership and use of Stanford trademarks and images">Trademarks</a></li>
              <li><a href="http://exploredegrees.stanford.edu/nonacademicregulations/nondiscrimination/" title="Non-discrimination policy">Non-Discrimination</a></li>
              <li><a href="https://www.stanford.edu/site/accessibility" title="Report web accessibility issues">Accessibility</a></li>
            </ul>
          </div>
          <div class="col-xs-12 col-md-10 col-md-offset-2">
            <p class="copyright vcard">&copy; <span class="fn org">Stanford University</span>, <span class="adr"> <span class="locality">Stanford</span>, <span class="region">California</span> <span class="postal-code">94305</span></span>.</p>
          </div>
        </div> <!-- .bottom-text end -->
      </div><!-- .row end -->
    </div><!-- .container end -->
  </div><!-- Global footer snippet end -->
  
</div>
<!-- END footer --> 
</body>
<!-- InstanceEnd --></html>
